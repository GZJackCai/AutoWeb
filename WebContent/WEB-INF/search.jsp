<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
	<div class="box search">
		<div class="search_lf fl">
			<input class="text search_text" type="text" value="搜索" />
		</div>
		<a class="search_btn fl" href="#">搜索</a>
		<div class="search_rgt fr">
			<!--选择品牌 start
			<div class="mdsch mdsch_01">
				<div class="mdsch_box">
					<ul class="mdsch_cnt">
						<a class="mdsch_zm" href="javascript:void(0)">A</a>
						<a href="javascript:void(0)">宝马</a>
						<a href="javascript:void(0)">阿斯顿马丁</a>
						<a href="javascript:void(0)">奥迪</a>
					</ul>
					<ul class="mdsch_cnt even">
						<a class="mdsch_zm" href="javascript:void(0)">B</a>
						<a href="javascript:void(0)">巴博斯</a>
						<a href="javascript:void(0)">保时捷</a>
						<a href="javascript:void(0)">北京汽车</a>
						<a href="javascript:void(0)">北汽威旺</a>
						<a href="javascript:void(0)">北汽制造</a>
						<a href="javascript:void(0)">奔驰</a>
						<a href="javascript:void(0)">奔腾</a>
						<a href="javascript:void(0)">本田</a>
						<a href="javascript:void(0)">布加迪</a>
						<a href="javascript:void(0)">比亚迪</a>
						<a href="javascript:void(0)">标致</a>
						<a href="javascript:void(0)">别克</a>
					</ul>
					<ul class="mdsch_cnt">
						<a class="mdsch_zm" href="javascript:void(0)">C</a>
						<a href="javascript:void(0)">昌河</a>
						<a href="javascript:void(0)">长安</a>
						<a href="javascript:void(0)">长安商用</a>
						<a href="javascript:void(0)">长城</a>
						<a href="javascript:void(0)">长丰</a>
						<a href="javascript:void(0)">川汽野马</a>
					</ul>
					<ul class="mdsch_cnt even">
						<a class="mdsch_zm" href="javascript:void(0)">D</a>
						<a href="javascript:void(0)">昌河</a>
						<a href="javascript:void(0)">长安</a>
						<a href="javascript:void(0)">长安商用</a>
						<a href="javascript:void(0)">长城</a>
						<a href="javascript:void(0)">长丰</a>
						<a href="javascript:void(0)">川汽野马</a>
					</ul>
					<ul class="mdsch_cnt">
						<a class="mdsch_zm" href="javascript:void(0)">F</a>
						<a href="javascript:void(0)">昌河</a>
						<a href="javascript:void(0)">长安</a>
						<a href="javascript:void(0)">长安商用</a>
						<a href="javascript:void(0)">长城</a>
						<a href="javascript:void(0)">长丰</a>
						<a href="javascript:void(0)">川汽野马</a>
					</ul>
					<ul class="mdsch_cnt even">
						<a class="mdsch_zm" href="javascript:void(0)">G</a>
						<a href="javascript:void(0)">昌河</a>
						<a href="javascript:void(0)">长安</a>
						<a href="javascript:void(0)">长安商用</a>
						<a href="javascript:void(0)">长城</a>
						<a href="javascript:void(0)">长丰</a>
						<a href="javascript:void(0)">川汽野马</a>
					</ul>
					<ul class="mdsch_cnt">
						<a class="mdsch_zm" href="javascript:void(0)">F</a>
						<a href="javascript:void(0)">昌河</a>
						<a href="javascript:void(0)">长安</a>
						<a href="javascript:void(0)">长安商用</a>
						<a href="javascript:void(0)">长城</a>
						<a href="javascript:void(0)">长丰</a>
						<a href="javascript:void(0)">川汽野马</a>
					</ul>
					<ul class="mdsch_cnt">
						<a class="mdsch_zm" href="javascript:void(0)">F</a>
						<a href="javascript:void(0)">昌河</a>
						<a href="javascript:void(0)">长安</a>
						<a href="javascript:void(0)">长安商用</a>
						<a href="javascript:void(0)">长城</a>
						<a href="javascript:void(0)">长丰</a>
						<a href="javascript:void(0)">川汽野马</a>
					</ul>
					<ul class="mdsch_cnt even">
						<a class="mdsch_zm" href="javascript:void(0)">G</a>
						<a href="javascript:void(0)">昌河</a>
						<a href="javascript:void(0)">长安</a>
						<a href="javascript:void(0)">长安商用</a>
						<a href="javascript:void(0)">长城</a>
						<a href="javascript:void(0)">长丰</a>
						<a href="javascript:void(0)">川汽野马</a>
					</ul>
				</div>
			</div>
			<div class="mdsch mdsch_02">
				<div class="mdsch_box02">
					<ul class="mdsch_cnt">
						<a class="mdsch_tit" href="javascript:void(0)">一汽奥迪</a>
						<a href="javascript:void(0)">昌河</a>
						<a href="javascript:void(0)">长安</a>
						<a href="javascript:void(0)">长安商用</a>
						<a href="javascript:void(0)">长城</a>
						<a href="javascript:void(0)">长丰</a>
						<a href="javascript:void(0)">川汽野马</a>
					</ul>
					<ul class="mdsch_cnt even">
						<a class="mdsch_tit" href="javascript:void(0)">一汽奥迪</a>
						<a href="javascript:void(0)">昌河</a>
						<a href="javascript:void(0)">长安</a>
						<a href="javascript:void(0)">长安商用</a>
						<a href="javascript:void(0)">长城</a>
						<a href="javascript:void(0)">长丰</a>
						<a href="javascript:void(0)">川汽野马</a>
					</ul>
				</div>
			</div>
			 选择车系 end-->
			 
			<strong>配件直达</strong> 
			
			<select class="text" id = "searchAutoBrand">
				<option>品牌</option>
			</select> 
			
			<select class="text" id = "searchAutoType">
				<option>车型</option>
			</select> 
			
			<select class="text" id = "searchAutoYear">
				<option>年份</option>
			</select> 
			
			<select class="text" id = "searchWidgetType">
				<option>配件类型</option>
			</select> 
			
			<select class="text" id = "searchWidgetName">
				<option>配件名</option>
			</select>
		</div>
	</div>
	
	
	<script>
	
	
	function requestAppendSelect(url, targetId){
		$.getJSON(url, function(brands){
				  var _brands = $("#"+targetId); 
				  
				  $(_brands.children("option")).each(function(){
					if(this.id){
						this.remove()
					}  
				  })
				  $.each(brands, function(k, v){
					  console.log("append", v.name);
					  _brands.append("<option id="+ v.id +">"+v.name+"</option>");
				  });
			  } 
		);
	}
	
	$(function(){
		// 加载搜索栏数据
		var searchItemURL = g_contextPath + "/jaxrs/ui/allAutoBrands";
		requestAppendSelect(searchItemURL, "searchAutoBrand");
		
		$("select").change(function(){
			console.log("change", this);
			var select_id = $(this).attr("id");
			var id = $(this).children('option:selected').attr("id");
			if(!id ){
				return;
			}
			switch (select_id){
			case "searchAutoBrand":
				// 获取汽车类型
				var searchItemURL = g_contextPath + "/jaxrs/ui/autoTypes/"+id;
				requestAppendSelect(searchItemURL, "searchAutoType");
				break;
			case "searchAutoType":
				// 获取汽车年份
				var searchItemURL = g_contextPath + "/jaxrs/ui/autoYears/"+id;
				requestAppendSelect(searchItemURL, "searchAutoYear");
				break;
			case "searchAutoYear":
				// 获取汽车配件类型
				var searchItemURL = g_contextPath + "/jaxrs/ui/autoWidgetTypes/"+id;
				requestAppendSelect(searchItemURL, "searchWidgetType");
				break;
			case "searchWidgetType":
				// 获取汽车配件
				var searchItemURL = g_contextPath + "/jaxrs/ui/autoWidgets/"+id;
				requestAppendSelect(searchItemURL, "searchWidgetName");
				break;
			case "searchWidgetName":
				break;
			
			}
		});
	});
</script>